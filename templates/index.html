{% extends "layout.html" %}

{% block body %}
<div class="container">
  <div class="row mb-4">
    <div id="message_box" class="col-sm-12">
      <h2>Add Message</h2>
      <form action="/" method="post">
        <div class="form-group">
          <label for="message">Message:</label>
          <textarea id="message" name="user_message" class="form-control"></textarea>
        </div>
        <div class="button">
          <button type="submit" class="btn btn-primary">Send your message</button>
        </div>
      </form>
    </div>
  </div>
  <hr />
  <div class="row">
    <div id="message_table" class="col-sm-12 mt-4">
      <h2>Messages</h2>
      <table class="table table-striped table-bordered table-hover table-sm">
        <tr class="thead-dark">
          <th>Message</th>
          <th>Acknowledged</th>
          <th>Timestamp</th>
        </tr>
      {% if messages %}
        {% for message in messages %} 
          <tr>
            <td>{{ message['message'] }}</td>
            <td>{{ message['acked'] }}</td>
            <td>{{ message['timestamp'] }}</td>
          </tr>
        {% endfor %}
      {% endif %}
      </table>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12 mt-4 mb-4">
      <div>
        <a href="https://github.com/RealKinetic/gcp_cloud_functions_py3_demo">Python 3 GAE Standard Repo</a>
      </div>
      <div>
        <a href="https://github.com/RealKinetic/gcp_gae_py3_demo_app">Python 3 Cloud Function Repo</a>
    </div>
  </div>
</div>
{% endblock %}
